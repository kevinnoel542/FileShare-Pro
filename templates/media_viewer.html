<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Media Viewer - {{ filename }}</title>
<style>
  body { font-family: Arial, sans-serif; background: #121212; color: white; margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; height: 100vh; }
  .container { background: #181818; padding: 20px; border-radius: 12px; max-width: 600px; width: 100%; box-shadow: 0 0 15px rgba(0,0,0,0.7); }
  .audio-card {
    display: flex; flex-direction: column; align-items: center;
    background: #282828; padding: 20px; border-radius: 15px;
  }
  .cover {
    width: 250px; height: 250px; background: #444; border-radius: 12px; margin-bottom: 15px;
    background-size: cover; background-position: center;
  }
  .title { font-size: 1.5rem; margin: 0; }
  .artist { font-size: 1rem; color: #b3b3b3; margin-bottom: 20px; }
  audio, video {
    width: 100%; border-radius: 12px; outline: none;
    background: black;
  }
  .video-player {
    max-width: 100%; border-radius: 15px;
    box-shadow: 0 0 20px rgba(255,255,255,0.1);
  }
  img.viewer-image {
    max-width: 100%; border-radius: 12px; box-shadow: 0 0 15px rgba(255,255,255,0.1);
  }
  a.download-link {
    display: inline-block; margin-top: 20px; color: #1db954; text-decoration: none; font-weight: bold;
  }
  a.download-link:hover {
    text-decoration: underline;
  }
</style>
</head>
<body>
  <div class="container">
    {% if file_type == 'audio' %}
      <div class="audio-card">
        <div class="cover" style="background-image: url('{{ metadata.cover }}');"></div>
        <h1 class="title">{{ metadata.title }}</h1>
        <p class="artist">{{ metadata.artist }}</p>
        <audio controls preload="metadata">
          <source src="{{ url_for('imported_serve_file', filename=filename) }}" type="audio/mpeg" />
          Your browser does not support the audio element.
        </audio>
      </div>

    {% elif file_type == 'video' %}
      <video class="video-player" controls preload="metadata" poster="{{ metadata.cover }}">
        <source src="{{ url_for('imported_serve_file', filename=filename) }}" type="video/mp4" />
        Your browser does not support the video tag.
      </video>

    {% elif file_type == 'image' %}
      <img src="{{ url_for('imported_serve_file', filename=filename) }}" alt="{{ filename }}" class="viewer-image" />

    {% else %}
      <p>Preview not available for this file type.</p>
      <a href="{{ url_for('imported_serve_file', filename=filename) }}" class="download-link" download>Download {{ filename }}</a>
    {% endif %}
  </div>
</body>
</html>
